# Определение пола по имени

## Пример

Требуется определить список людей, у которых есть ошибка в задании пола

```SQL
select *
  from (
         select A.AGNFAMILYNAME ФАМИЛИЯ,
                A.AGNFIRSTNAME  ИМЯ,
                A.AGNLASTNAME   ОТЧЕСТВО,
                decode(A.SEX, 1, 'М', 2, 'Ж') ПОЛ,
                decode
                (
                    UDO_F_GENDER_BY_NAME
                    (
                        A.AGNFAMILYNAME,
                        A.AGNFIRSTNAME,
                        A.AGNLASTNAME
                    ),
                    1, 'М',
                    2, 'Ж'
                ) ОПР
           from AGNLIST A
          where A.AGNTYPE = 1    -- физическое лицо
            and A.SEX != 0       -- пол задан
       )
 where ПОЛ != ОПР
```

Результат

|   | ФАМИЛИЯ  | ИМЯ     | ОТЧЕСТВО  | ПОЛ | ОПР |
|---|----------|---------|-----------|:---:|:---:|
| 1 | Волкова  | Татьяна | Олеговна  | М   | Ж   |
| 2 | Дронин   | Николай | Сергеевич | Ж   | М   |
| 3 | Андреева | Анна    | Юрьевна   | М   | Ж   |
| 4 | Бубнов   | Михаил  | Иванович  | Ж   | М   |
| 5 | Круглов  | Юрий    | Львович   | Ж   | М   |